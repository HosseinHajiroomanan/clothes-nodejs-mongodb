"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const mongoose_1 = require("mongoose");
const authController_1 = require("./src/controllers/authController");
const clothesController_1 = require("./src/controllers/clothesController");
const express = require('express');
const app = express();
require('dotenv').config();
const authRoutes = require('./src/routes/authRoutes');
const clothesRoutes = require('./src/routes/clothesRoutes');
const jwtMiddleware = require('./src/middlware/jwtMiddleware');
const logMiddleware = require('./src/middlware/logMiddleware');
const swaggerUi = require('swagger-ui-express');
const swaggerDocument = require('./swagger.json');
const PORT = process.env.port;
(0, mongoose_1.connect)("mongodb://db:27017").then();
app.use(express.json());
app.use('/docs', swaggerUi.serve, swaggerUi.setup(swaggerDocument));
app.use('/auth', logMiddleware, authRoutes);
app.use('/clothes', logMiddleware, jwtMiddleware, clothesRoutes);
app.post('/signup', authController_1.signup);
app.post('/login', authController_1.login);
app.post('/add-clothes', clothesController_1.addClothes);
app.get('/get-clothes/:id', clothesController_1.getClothes);
app.get('/get-final-price/:id', clothesController_1.getFinalPriceClothes);
app.delete('/delete-clothes/:id', clothesController_1.deleteClothes);
app.delete('/delete-all-clothes', clothesController_1.deleteAllClothes);
app.patch('/edit-clothes/:id', clothesController_1.editClothes);
app.listen(PORT, () => {
    console.log(`Server is running on port ${PORT}`);
});
